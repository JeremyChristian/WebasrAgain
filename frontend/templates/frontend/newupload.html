{% extends 'rest_framework/api.html' %} 
{% block content %}
<body>
<script>
var i = 1
var input = {language:"", environment:"", checkone:false, checktwo:false}
	function addFile() {
		i = i + 1
		var string = '\
		<div class="form-group">\
			<label class="col-sm-2 control-label ">File</label>\
			<div class="col-sm-10">\
				<input name="file$"  type="file">\
			</div>\
		</div>';
		string = string.replace('$',i.toString())
		document.getElementById("bah").innerHTML += string
	}
	function populateSystems() {
		if input.checkone {
			if input.checktwo {
				
			}
		}
	}
	function addLang() {
		input.language = (document.getElementById("language")).value;
		input.checkone = true;
	}
	function addEnv() {
		input.environment = (document.getElementById("environment")).value;
		input.checktwo = true;
	}
		
</script>



<form action="/newupload" method="POST" enctype="multipart/form-data" class="form-horizontal well" novalidate>

	<fieldset>

		<input type='hidden' name='csrfmiddlewaretoken' value='wSN8D5j2pFr0YyuzU7wJFGkb5gck9G5j'/>    

		<div id='bah'>

			<div class="form-group">

				<label class="col-sm-2 control-label ">File</label>

				<div class="col-sm-10">

					<input name="file1"  type="file">

				</div>

			</div>

		</div>

		<div class="form-group">

			<input class="btn btn-primary" type="button" id="addfile" onclick="addFile();" value="Add File" />

		</div>

        <div class="form-group">

    		<label class="col-sm-2 control-label ">Language</label>

    		<div class="col-sm-10">

        		<select class="form-control" name="language" oninput="addLang()" id='language'>
        
        			<option>Please select a language</option>

		            {% for language in languages %}

		            	<option value="{{language}}" >{{language}}</option>
		        			
		        	{% endfor %}
        
        		</select>
        	</div>
		</div>

    	<div class="form-group">
    
        	<label class="col-sm-2 control-label ">Environment</label>
    
    		<div class="col-sm-10">
        
        		<select class="form-control" name="environment" oninput="addEnv()" id='environment'>
		        
        			{% for environment in environments %}

            			<option value="{{environment}}" >{{environment}}</option>
        			
        			{% endfor %}
        
        		</select>
        
    		</div>

		</div>

        <div class="form-group">
    
    	    <label class="col-sm-2 control-label ">Systems</label>
    
		    <div class="col-sm-10">

        		<select class="form-control" name="systems" id='systemselect'>

        		</select>
		        
		   	</div>
		</div>
		
		<div class="form-group ">
    
	        <label class="col-sm-2 control-label ">Metadata</label>
    
   			<div class="col-sm-10">
        		
        		<input name="metadata"  type="file">
        
    		</div>

		</div>

		<div class="form-actions">
			
			<button class="btn btn-primary" title="Upload User Audio to WebASR">Upload</button>
													
		</div>
												
	</fieldset>
										
</form>

<table class="table table-hover well col-sm-12" style='border:20px; width:100%;'>

  <thead style='border:20px;'>

    <tr style='border:20px;'>

      <td>Created</td>
      <td>Audiofiles</td>
      <td>Language</td>
      <td>Environment</td>
      <td>Metadata</td>
      <td>Transcripts</td>
    </tr>

  </thead>

  <tbody>

  {% for upload, audio in uploads %}

    <tr class = "info">

      <td style="width: 25%">{{upload.created}}</td>
      <td style="width: 25%">
	      {% for file in audio %}
	      	{{file.audiofile}}<br>
	      {% endfor %}
      </td>
      <td style="width: 25%">{{upload.language}}</td>
      <td style="width: 25%">{{upload.environment}}</td>
      <td style="width: 25%">{{upload.metadata}}</td>
      <td style="width: 25%">{{upload.transcripts}}</td>
    </tr>

  {% endfor %} 

  </tbody>

</table>

</body>			

{% endblock %}
